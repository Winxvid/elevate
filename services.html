<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elevated Auto Wraps | San Antonio Vehicle Customization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@1,900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --purple-neon: #a855f7;
        --purple-light: #e9d5ff;
      }
      body {
        font-family: 'Inter', sans-serif;
        background-color: #08070b;
        background-image: 
          radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.15) 0%, transparent 40%),
          radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.2) 0%, transparent 50%),
          radial-gradient(circle at 50% 100%, rgba(233, 213, 255, 0.15) 0%, transparent 60%),
          linear-gradient(to bottom, #08070b 0%, #0c0b14 100%);
        color: #fff;
        margin: 0;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        scroll-behavior: smooth;
      }
      .porsche-font {
        font-family: 'Archivo', sans-serif;
        font-weight: 900;
        font-style: italic;
        text-transform: uppercase;
        letter-spacing: -0.05em;
      }
      .bg-aura-purple {
        background: radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.25) 0%, transparent 70%);
      }
      .bg-aura-white {
        background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.12) 0%, transparent 70%);
      }
      .bg-mesh {
        background-image: 
          radial-gradient(at 0% 0%, rgba(255, 255, 255, 0.05) 0px, transparent 50%),
          radial-gradient(at 100% 0%, rgba(168, 85, 247, 0.1) 0px, transparent 50%),
          radial-gradient(at 100% 100%, rgba(255, 255, 255, 0.05) 0px, transparent 50%),
          radial-gradient(at 0% 100%, rgba(168, 85, 247, 0.1) 0px, transparent 50%);
        background-size: cover;
      }
      .glass-panel {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .btn-solid { 
        background: #7c3aed; 
        color: white; 
        padding: 18px 45px; 
        font-weight: 800; 
        display: inline-block; 
        transition: all 0.3s cubic-bezier(0.2, 1, 0.3, 1);
        text-decoration: none !important;
        cursor: pointer;
        box-shadow: 0 0 30px rgba(124, 58, 237, 0.3);
      }
      .btn-solid:hover {
        transform: scale(1.05);
        background: #fff;
        color: #000;
        box-shadow: 0 0 40px rgba(255, 255, 255, 0.5);
      }
      
    /* Epic Ken Burns Effect */
    @keyframes epicZoom {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }
    .ken-burns {
      animation: epicZoom 15s ease-in-out infinite alternate;
      will-change: transform;
    }
    </style>
    <!-- GSAP and ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="navbar.js"></script>
</head>
<body class="bg-[#08070b] text-white antialiased">
  <!-- Preloader -->
  <div id="preloader" class="fixed inset-0 z-[9999] bg-black flex flex-col items-center justify-center overflow-hidden transition-opacity duration-700">
    <div class="relative flex flex-col items-center">
      <img src="https://ogautocc.com/ElevatedWraps/Elevated_preloader.GIF" class="h-32 md:h-48 w-auto mb-8" alt="Elevated Wraps Loading...">
      <div class="w-48 h-[1px] bg-zinc-900 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-purple-500 to-transparent w-full h-full animate-[loading_1.5s_ease-in-out_infinite] -translate-x-full"></div>
      </div>
    </div>
    <div class="mt-12 overflow-hidden">
      <span class="porsche-font text-[10px] tracking-[1em] text-zinc-500 block animate-pulse">
        PREPARING EXCELLENCE
      </span>
    </div>
  </div>
  <style>
    @keyframes loading {
      0% { transform: translateX(-100%); }
      50% { transform: translateX(100%); }
      100% { transform: translateX(100%); }
    }
  </style>
  <script>
    // Immediate check to prevent flash on repeat visits
    if (sessionStorage.getItem('elevated_preloader_shown')) {
      const preloader = document.getElementById('preloader');
      if (preloader) preloader.style.display = 'none';
    }

    window.addEventListener('load', function() {
      const preloader = document.getElementById('preloader');
      // Only run animation if preloader is still visible
      if (preloader && preloader.style.display !== 'none') {
        setTimeout(() => {
          preloader.style.opacity = '0';
          setTimeout(() => {
            preloader.style.display = 'none';
            // Mark as shown for this session
            sessionStorage.setItem('elevated_preloader_shown', 'true');
          }, 700);
        }, 6000);
      }
    });
  </script>

  <div id="navbar-container"></div>
  <main class="min-h-screen">
    <div class="bg-black min-h-screen relative overflow-hidden">
      <div class="absolute top-0 right-0 w-[1000px] h-[1000px] bg-purple-900/10 blur-[150px] rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
      <div class="absolute bottom-0 left-0 w-[800px] h-[800px] bg-zinc-800/10 blur-[120px] rounded-full translate-y-1/2 -translate-x-1/2 pointer-events-none"></div>
      <section class="offer-section relative pt-32 md:pt-40 pb-20 md:pb-24 bg-transparent overflow-hidden z-10">
        <style>
          .offer-card {
            position: relative;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            background: #0a0a0a;
            border: 1px solid rgba(124, 58, 237, 0.2);
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1), border-color 0.4s ease, box-shadow 0.4s ease;
            transform: translateZ(0);
          }
          @media (min-width: 768px) {
            .offer-card { height: 480px; }
          }
          .offer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), rgba(124, 58, 237, 0.4), transparent);
            transform: skewX(-25deg);
            z-index: 3;
            pointer-events: none;
            will-change: left;
          }
          .offer-card:hover::before {
            left: 150%;
            transition: left 1s cubic-bezier(0.16, 1, 0.3, 1);
          }
          .offer-card:hover {
            transform: translateY(-10px) translateZ(0);
            border-color: #a78bfa;
            box-shadow: 0 0 40px rgba(124, 58, 237, 0.5);
          }
          .card-title-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 25px 15px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
            font-size: 1.1rem;
            font-weight: 900;
            text-transform: uppercase;
            text-align: center;
            z-index: 4;
            color: white;
            transition: color 0.3s ease;
          }
          @media (min-width: 768px) {
            .card-title-overlay { padding: 30px 20px; font-size: 1.3rem; }
          }
          .offer-card:hover .card-title-overlay { color: #a855f7; }
          .plus-toggle {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1), background-color 0.4s ease;
          }
          @media (min-width: 768px) {
            .plus-toggle { width: 45px; height: 45px; }
          }
          .plus-icon {
            position: relative;
            width: 14px;
            height: 2px;
            background: #000;
            transition: background-color 0.3s ease;
          }
          @media (min-width: 768px) {
            .plus-icon { width: 16px; }
          }
          .plus-icon::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 14px;
            background: #000;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            transition: background-color 0.3s ease;
          }
          @media (min-width: 768px) {
            .plus-icon::after { height: 16px; }
          }
          .offer-card:hover .plus-toggle {
            background: #7c3aed;
            transform: rotate(90deg);
          }
          .offer-card:hover .plus-icon,
          .offer-card:hover .plus-icon::after {
            background: #fff;
          }
        </style>
        <div id="services-hero-trigger" class="max-w-screen-2xl mx-auto px-6 mb-12 md:mb-24 flex justify-center h-[fit-content]">
            <div id="services-hero-title" class="origin-center opacity-0 w-full flex justify-center">
             <div data-us-project="cb1pg5ymSzmJuCnPEkTP" style="width:1920px; height: 850px; max-width: 100%; height: auto; aspect-ratio: 1920/850;"></div>
             <script type="text/javascript">!function(){var u=window.UnicornStudio;if(u&&u.init){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(){u.init()})}else{u.init()}}else{window.UnicornStudio={isInitialized:!1};var i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v2.0.5/dist/unicornStudio.umd.js",i.onload=function(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(){UnicornStudio.init()})}else{UnicornStudio.init()}},(document.head||document.body).appendChild(i)}}();</script>
            </div>
        </div>
        <div class="max-w-[1400px] mx-auto px-6">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="offer-card group" style="opacity: 1; transform: none;">
              <div class="card-title-overlay porsche-font">Paint Protection Film</div>
              <img alt="Paint Protection Film" class="w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105" loading="lazy" decoding="async" src="https://ogautocc.com/ElevatedWraps/Paint_Protection_Film.jpg">
              <div class="plus-toggle"><div class="plus-icon"></div></div>
            </div>
            <div class="offer-card group" style="opacity: 1; transform: none;">
              <div class="card-title-overlay porsche-font">Vinyl Wraps</div>
              <img alt="Vinyl Wraps" class="w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105" loading="lazy" decoding="async" src="https://ogautocc.com/ElevatedWraps/Vinyl_wraps.jpg">
              <div class="plus-toggle"><div class="plus-icon"></div></div>
            </div>
            <div class="offer-card group" style="opacity: 1; transform: none;">
              <div class="card-title-overlay porsche-font">Window Tint</div>
              <img alt="Window Tint" class="w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105" loading="lazy" decoding="async" src="https://ogautocc.com/ElevatedWraps/Window_tint.JPG">
              <div class="plus-toggle"><div class="plus-icon"></div></div>
            </div>
            <div class="offer-card group" style="opacity: 1; transform: none;">
              <div class="card-title-overlay porsche-font">Auto Detail</div>
              <img alt="Auto Detail" class="w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105" loading="lazy" decoding="async" src="https://ogautocc.com/ElevatedWraps/Auto_Detail.jpg">
              <div class="plus-toggle"><div class="plus-icon"></div></div>
            </div>
          </div>
        </div>
      </section>
      <section class="py-24 md:py-48 relative border-t border-white/5 overflow-hidden">
        <div class="absolute inset-0 z-0">
          <img src="https://images.squarespace-cdn.com/content/v1/67053ead069230112a5e9280/15a2f83f-a017-4178-9273-17f19da9677a/unsplash-image-ZNkiEWL02mI.jpg?format=2500w" alt="Tailored Excellence Background" class="w-full h-full object-cover opacity-50">
          <div class="absolute inset-0 bg-black/60"></div>
        </div>
        <div class="max-w-7xl mx-auto px-6 text-center relative z-10">
          <div style="opacity: 1; transform: none;">
            <h3 class="porsche-font text-3xl md:text-6xl text-white mb-8 md:mb-10">Tailored <span class="text-purple-500">Excellence.</span></h3>
            <p class="text-zinc-500 text-base md:text-xl font-light italic mb-12 md:mb-16 max-w-2xl mx-auto">Our specialists provide curated consultations to ensure your vehicle receives exactly what it needs for maximum preservation and aesthetic impact.</p>
            <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-8">
              <a href="tel:2102014999" class="btn-solid py-5 md:py-6 px-10 md:px-12 text-[9px] md:text-[10px] tracking-[0.4em] rounded-full bg-white !text-black hover:!bg-purple-600 hover:!text-white shadow-none w-full md:w-auto">Direct Line</a>
              <a class="btn-solid py-5 md:py-6 px-10 md:px-12 text-[9px] md:text-[10px] tracking-[0.4em] rounded-full w-full md:w-auto" href="quote.html" data-discover="true">Schedule a Consult</a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <div id="footer-container"></div>
  <script>
    fetch('navbar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      });
    fetch('footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
        // Re-init Unicorn Studio if it's already loaded to catch the new footer elements
        if (window.UnicornStudio) {
          window.UnicornStudio.init();
        }
      });
  </script>
  <script>
    // UnicornStudio initialization
    (function(){
      var u = window.UnicornStudio;
      if(u && u.init){
        if(document.readyState === "loading"){
          document.addEventListener("DOMContentLoaded", function(){u.init()});
        }else{
          u.init();
        }
      }else{
        window.UnicornStudio = {isInitialized:!1};
        var i = document.createElement("script");
        i.src = "https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v2.0.5/dist/unicornStudio.umd.js";
        i.onload = function(){
          if(document.readyState === "loading"){
            document.addEventListener("DOMContentLoaded", function(){UnicornStudio.init()});
          }else{
            UnicornStudio.init();
          }
        };
        (document.head||document.body).appendChild(i);
      }
    })();
  </script>
  <!-- Service Detail Modal -->
  <div id="service-modal" class="fixed inset-0 z-[11000] hidden opacity-0 font-sans">
    <div class="absolute inset-0 bg-black/95 transition-opacity" id="modal-backdrop"></div>
    <div class="absolute inset-0 bg-cover bg-center opacity-30 blur-sm scale-105 transition-all duration-700" id="modal-bg-image"></div>
    
    <button id="modal-close" class="absolute top-6 right-6 z-50 group flex items-center gap-2 text-white hover:text-purple-500 transition-colors p-2 pl-4 bg-black/50 rounded-full border border-white/10 hover:border-purple-500/50 backdrop-blur-md">
      <span class="text-xs font-black uppercase tracking-widest hidden md:block">Close</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Navigation Arrows -->
    <button id="modal-prev" class="absolute left-2 md:left-8 top-1/2 -translate-y-1/2 z-50 text-white/50 hover:text-purple-400 transition-all p-3 hover:bg-white/10 rounded-full group">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-12 md:w-12 transform group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <button id="modal-next" class="absolute right-2 md:right-8 top-1/2 -translate-y-1/2 z-50 text-white/50 hover:text-purple-400 transition-all p-3 hover:bg-white/10 rounded-full group">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-12 md:w-12 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>

    <div class="relative z-10 flex flex-col items-center justify-center h-full px-12 md:px-24 max-w-5xl mx-auto text-center">
      <h2 id="modal-title" class="text-4xl md:text-6xl font-bold mb-8 text-white porsche-font tracking-wide uppercase drop-shadow-2xl"></h2>
      <div id="modal-description" class="text-xl md:text-2xl text-gray-100 leading-relaxed font-light whitespace-pre-line drop-shadow-lg max-w-2xl"></div>
    </div>
  </div>

  <script>
    // Wait for everything to be fully loaded, including external scripts and assets
    window.addEventListener("load", (event) => {
      gsap.registerPlugin(ScrollTrigger);

      // Force a ScrollTrigger refresh to ensure positions are calculated correctly
      // after all dynamic content (like Unicorn Studio) has settled.
      ScrollTrigger.refresh();

      // Hero Title Scroll Animation
      // We pin the wrapper (#services-hero-trigger) but animate the inner content (#services-hero-title)
      // This ensures the layout is calculated correctly before the scale transform skews it.
      const animation = gsap.fromTo("#services-hero-title", 
        { 
          scale: 0.2,
          autoAlpha: 0,
          transformOrigin: "center center" // Explicitly define transform origin
        },
        {
          scale: 1,
          autoAlpha: 1, 
          ease: "none",
          scrollTrigger: {
            trigger: "#services-hero-trigger", // Pin the wrapper
            pin: true,
            start: "center center", 
            end: "+=800",
            scrub: true,
            // Recalculate on refresh
            invalidateOnRefresh: true
          }
        }
      );
      
      // Additional safety: Refresh ScrollTrigger after a short delay
      // to handle any late-loading content or layout shifts
      setTimeout(() => ScrollTrigger.refresh(), 500);
    });

      // Services Modal Logic
      const servicesData = {
        "Paint Protection Film": "Protect and enhance your vehicle with PPF wraps available in gloss, satin, track film, and custom colors or patterns.\n\nShields against scratches, chips, and paint damage.",
        "Vinyl Wraps": "Transform your vehicle with vinyl wraps in custom colors, finishes, and designs.\n\nFrom accents to full body wraps, the options are endless.",
        "Window Tint": "Ride in style and comfort with our premium window tint.\n\nChoose from a range of shades that reduce glare, block UV rays, and protect your interior.",
        "Auto Detail": "Refresh your vehicle inside and out with our premium detailing service.\n\nRestore shine, protect surfaces, and hit the road looking your best."
      };

      const modal = document.getElementById('service-modal');
      const modalBg = document.getElementById('modal-bg-image');
      const modalTitle = document.getElementById('modal-title');
      const modalDesc = document.getElementById('modal-description');
      const closeBtn = document.getElementById('modal-close');
      const prevBtn = document.getElementById('modal-prev');
      const nextBtn = document.getElementById('modal-next');
      
      let isModalOpen = false;
      let currentIndex = 0;
      let serviceItems = [];

      // Initialize Data Structure
      function initServiceItems() {
        const cards = document.querySelectorAll('.offer-card');
        serviceItems = Array.from(cards).map(card => {
          const title = card.querySelector('.card-title-overlay').textContent.trim();
          const img = card.querySelector('img').src;
          const desc = servicesData[title] || "";
          return { title, img, desc };
        });
      }

      function updateModalContent(index) {
        if(index < 0 || index >= serviceItems.length) return;
        const item = serviceItems[index];
        
        // Update Content
        modalTitle.textContent = item.title;
        modalDesc.textContent = item.desc;
        modalBg.style.backgroundImage = `url('${item.img}')`;
        
        // Animate Content Change (Subtle pulse)
        gsap.fromTo([modalTitle, modalDesc], 
          { opacity: 0.5, y: 5 }, 
          { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" }
        );
      }

      function openModal(index) {
        if (isModalOpen) return;
        isModalOpen = true;
        currentIndex = index;
        
        updateModalContent(currentIndex);
        
        // Show Modal
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
        
        const tl = gsap.timeline();
        tl.to(modal, { opacity: 1, duration: 0.4 })
          .fromTo(modalTitle, { y: 50, opacity: 0 }, { y: 0, opacity: 1, duration: 0.6, ease: "power3.out" }, "-=0.2")
          .fromTo(modalDesc, { y: 30, opacity: 0 }, { y: 0, opacity: 1, duration: 0.6, ease: "power3.out" }, "-=0.4");
      }

      function closeModal() {
        if (!isModalOpen) return;
        
        gsap.to(modal, { 
          opacity: 0, 
          duration: 0.3, 
          onComplete: () => {
            modal.classList.add('hidden');
            document.body.style.overflow = '';
            isModalOpen = false;
          } 
        });
      }

      function nextService() {
        currentIndex = (currentIndex + 1) % serviceItems.length;
        updateModalContent(currentIndex);
      }

      function prevService() {
        currentIndex = (currentIndex - 1 + serviceItems.length) % serviceItems.length;
        updateModalContent(currentIndex);
      }

      // Initialize
      initServiceItems();

      // Attach Event Listeners
      document.querySelectorAll('.offer-card').forEach((card, index) => {
        const toggleBtn = card.querySelector('.plus-toggle');
        if (toggleBtn) {
          toggleBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            openModal(index); // Use index instead of title/src
          });
        }
      });

      if (closeBtn) closeBtn.addEventListener('click', closeModal);
      if (prevBtn) prevBtn.addEventListener('click', (e) => { e.stopPropagation(); prevService(); });
      if (nextBtn) nextBtn.addEventListener('click', (e) => { e.stopPropagation(); nextService(); });
      
      // Close on background click
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal || e.target.id === 'modal-backdrop') {
            closeModal();
          }
        });
      }
      
      // Keyboard Navigation
      document.addEventListener('keydown', (e) => {
        if (!isModalOpen) return;
        
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowRight') nextService();
        if (e.key === 'ArrowLeft') prevService();
      });
  </script>
</body>
</html>