<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elevated Auto Wraps | San Antonio Vehicle Customization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@1,900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --purple-neon: #a855f7;
      --purple-light: #e9d5ff;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #08070b;
      background-image: 
        radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 50% 100%, rgba(233, 213, 255, 0.15) 0%, transparent 60%),
        linear-gradient(to bottom, #08070b 0%, #0c0b14 100%);
      color: #fff;
      margin: 0;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      /* scroll-behavior handled by Lenis smooth scroll */
    }
    .porsche-font {
      font-family: 'Archivo', sans-serif;
      font-weight: 900;
      font-style: italic;
      text-transform: uppercase;
      letter-spacing: -0.05em;
    }
    .bg-aura-purple {
      background: radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.25) 0%, transparent 70%);
    }
    .bg-aura-white {
      background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.12) 0%, transparent 70%);
    }
    .bg-mesh {
      background-image: 
        radial-gradient(at 0% 0%, rgba(255, 255, 255, 0.05) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(168, 85, 247, 0.1) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(255, 255, 255, 0.05) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(168, 85, 247, 0.1) 0px, transparent 50%);
      background-size: cover;
    }
    .glass-panel {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .btn-solid { 
        position: relative;
        background: transparent !important;
        color: #a855f7 !important; 
        padding: 18px 45px; 
        font-weight: 800; 
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-decoration: none !important;
        cursor: pointer;
        border-radius: 9999px;
        overflow: hidden;
        border: 1px solid rgba(168, 85, 247, 0.1);
        transition: all 0.3s ease;
        box-shadow: 0 0 10px rgba(168, 85, 247, 0.1);
        z-index: 1;
    }

    .btn-solid::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 400%; 
        height: 400%;
        background: conic-gradient(
            from 0deg at 50% 50%,
            transparent 50%,
            #a855f7 70%,
            #ffffff 100%
        );
        z-index: -2;
        animation: borderRotate 2s linear infinite; 
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .btn-solid::after {
        content: "";
        position: absolute;
        inset: 3px; 
        background: #ffffff;
        border-radius: 9999px;
        z-index: -1;
    }

    .btn-solid:hover::before {
       opacity: 1; 
    }

    .btn-solid:hover {
        transform: scale(1.05);
        color: #7e22ce !important;
        box-shadow: 0 0 50px rgba(168, 85, 247, 0.7); 
        border-color: transparent;
    }
    
    .btn-solid span {
        position: relative;
        z-index: 10;
    }

    @keyframes borderRotate {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    /* Epic Ken Burns Effect */
    @keyframes epicZoom {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }
    .ken-burns {
      animation: epicZoom 15s ease-in-out infinite alternate;
      will-change: transform;
    }
    /* Ensure containers hide the zoom overflow */
    .overflow-hidden-fix {
        overflow: hidden;
    }

    /* Text Reveal Animation */
    .text-reveal {
      overflow: hidden;
    }
    
    .text-reveal .word {
      display: inline-block;
      opacity: 0;
      transform: translateY(15px);
    }
    
    .text-reveal.animate .word {
      animation: textReveal 0.6s ease-out forwards;
    }
    
    @keyframes textReveal {
      0% {
        opacity: 0;
        transform: translateY(15px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Encrypted Text Animation */
    .encrypted-text, .encrypted-inline {
      font-family: 'Courier New', monospace;
      position: relative;
      display: inline-block;
    }
    
    .encrypted-text .char, .encrypted-inline .char {
      display: inline-block;
      transition: all 0.1s ease;
      position: relative;
    }
    
    .encrypted-text.scrambling .char, .encrypted-inline.scrambling .char {
      animation: scramble 2.5s ease-in-out;
    }
    
    .encrypted-inline {
      color: #a855f7; /* Purple accent for encrypted portions */
      font-weight: 600;
    }
    
    @keyframes scramble {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90% {
        transform: translateY(-1px) scale(1.05);
        opacity: 0.8;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
  </style>
  <!-- GSAP and ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <!-- Lenis Smooth Scroll (Porsche-grade glide) -->
  <script src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js"></script>

  <!-- IntersectionObserver Polyfill for older browsers -->
  <script>
    if (!('IntersectionObserver' in window)) {
      document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"><\/script>');
    }
  </script>
</head>
<body>
  <!-- Preloader -->
  <div id="preloader" class="fixed inset-0 z-[9999] bg-black flex flex-col items-center justify-center overflow-hidden transition-opacity duration-700">
    <div class="relative flex flex-col items-center">
      <img src="https://ogautocc.com/ElevatedWraps/Elevated_preloader.GIF" class="h-32 md:h-48 w-auto mb-8" alt="Elevated Wraps Loading...">
      <div class="w-48 h-[1px] bg-zinc-900 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-purple-500 to-transparent w-full h-full animate-[loading_1.5s_ease-in-out_infinite] -translate-x-full"></div>
      </div>
    </div>
    <div class="mt-12 overflow-hidden">
      <span class="porsche-font text-[10px] tracking-[1em] text-zinc-500 block animate-pulse">
        PREPARING EXCELLENCE
      </span>
    </div>
  </div>
  <style>
    @keyframes loading {
      0% { transform: translateX(-100%); }
      50% { transform: translateX(100%); }
      100% { transform: translateX(100%); }
    }
  </style>
  <script>
    // Immediate check to prevent flash on repeat visits
    if (sessionStorage.getItem('elevated_preloader_shown')) {
      const preloader = document.getElementById('preloader');
      if (preloader) {
        preloader.style.display = 'none';
      }
    } else {
      // Lock scroll while preloader is active to prevent user from scrolling on mobile
      document.body.style.overflow = 'hidden';
      // Fallback: Force remove preloader after 10s if load hangs (e.g. slow network)
      setTimeout(() => {
        const preloader = document.getElementById('preloader');
        if (preloader && preloader.style.display !== 'none') {
           preloader.style.opacity = '0';
           setTimeout(() => {
             preloader.style.display = 'none';
             document.body.style.overflow = '';
             sessionStorage.setItem('elevated_preloader_shown', 'true');
           }, 700);
        }
      }, 10000);
    }

    window.addEventListener('load', function() {
      const preloader = document.getElementById('preloader');
      // Only run animation if preloader is still visible
      if (preloader && preloader.style.display !== 'none') {
        const loadingTime = 4000; // Reduced from 6000 for better mobile UX
        setTimeout(() => {
          preloader.style.opacity = '0';
          setTimeout(() => {
            preloader.style.display = 'none';
            // Unlock scroll
            document.body.style.overflow = '';
            // Mark as shown for this session
            sessionStorage.setItem('elevated_preloader_shown', 'true');
          }, 700);
        }, loadingTime);
      }
    });
  </script>

  <!-- Navbar -->
  <div id="navbar-container"></div>

  <!-- Home Section -->
  <div class="bg-[#08070b] relative overflow-hidden hero" style="margin-top: 100px;">
    <div class="absolute inset-0 bg-mesh opacity-40 pointer-events-none"></div>
    <div class="absolute top-0 left-0 w-full h-[600px] md:h-[1000px] bg-gradient-to-b from-white/10 to-transparent pointer-events-none"></div>
    <div class="absolute top-1/4 -left-1/4 w-[600px] md:w-[1200px] h-[600px] md:h-[1200px] bg-purple-500/15 blur-[150px] md:blur-[300px] rounded-full pointer-events-none"></div>
    <canvas id="hero-canvas" style="position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:1;"></canvas>
    <section class="relative h-[100dvh] w-full flex items-center justify-center overflow-hidden" style="z-index:2;">
      <div class="hero-content opacity-0 relative z-20 text-center px-4 w-full max-w-[1600px] mx-auto pt-24">
        <h1 class="porsche-font text-[clamp(2.5rem,14vw,8.5rem)] leading-[0.75] text-white tracking-[-0.05em]">
          <span class="block mb-2 md:mb-4 drop-shadow-[0_10px_40px_rgba(0,0,0,1)]">ELEVATED</span>
          <span class="text-white drop-shadow-[0_0_60px_rgba(168,85,247,0.5)] italic">AUTO <span class="text-purple-400">WRAPS.</span></span>
        </h1>
        <div class="flex flex-col gap-4 mt-10 md:mt-16 mb-12 md:mb-20 text-white uppercase font-bold tracking-widest">
          <span class="text-purple-300 text-[10px] md:text-sm tracking-[0.5em] md:tracking-[0.8em] font-black drop-shadow-2xl encrypted-text" id="encrypted-subtitle">Woman owned and operated</span>
          <span class="text-[11px] md:text-lg tracking-[0.3em] md:tracking-[0.5em] opacity-80 font-medium px-4 max-w-2xl mx-auto italic leading-relaxed">SAN ANTONIO’S PREMIER DESTINATION FOR AUTOMOTIVE EXCELLENCE</span>
        </div>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-5 md:gap-8 px-8 sm:px-0">
          <a href="tel:2102014999" class="btn-solid py-5 md:py-6 px-12 md:px-14 uppercase tracking-[0.4em] text-[10px] md:text-[11px] w-full sm:w-auto text-center rounded-full transition-all duration-500">Call Direct</a>
          <a href="quote.html" class="btn-solid py-5 md:py-6 px-12 md:px-14 uppercase tracking-[0.4em] text-[10px] md:text-[11px] w-full sm:w-auto text-center rounded-full transition-all duration-500">Get a Quote</a>
        </div>
      </div>
    </section>
  </div>
  <!-- Inserted Image After Hero Section -->
  <div class="w-full flex flex-col md:flex-row justify-center items-center py-12 gap-12 md:gap-20 max-w-6xl mx-auto parallax-section" data-speed="0.7">
    <div class="md:w-1/2 w-full flex flex-col justify-center items-start px-4 md:px-0">
      <h2 class="porsche-font text-[clamp(2rem,5vw,3.6rem)] text-purple-500 leading-tight mb-6 text-reveal" id="elevate-text">ELEVATE YOUR VEHICLE</h2>
      <p class="text-white text-lg md:text-xl font-medium leading-relaxed mb-4 text-reveal">Elevated Auto Wraps is San Antonio's premier studio for <span class="encrypted-inline">Vehicle Customization and Auto Styling</span>.</p>
      <p class="text-zinc-300 text-base md:text-lg leading-loose text-reveal">With a foundation built on a passion for cars, our specialists have evolved into <span class="encrypted-inline">artisans of automotive aesthetics</span>, with a commitment to mastering the art of film installation and custom wraps, and an <span class="encrypted-inline">unyielding dedication to enhancing every vehicle</span> we touch and elevate.</p>
    </div>
    <div class="md:w-1/2 w-full perspective-scroll-container h-[400px] md:h-[600px] relative flex items-center justify-center">
      <div class="scroll-animation-card w-full h-full relative overflow-hidden rounded-2xl shadow-2xl origin-center border border-white/10 bg-zinc-900 group">
         <img src="https://images.squarespace-cdn.com/content/v1/67053ead069230112a5e9280/4edcf25b-3f11-4a85-84c5-0ffa204d7867/IMG_9219.jpeg?format=2500w" alt="Elevated Auto Wraps Shop" class="absolute inset-0 w-full h-full object-cover grayscale-[0.2] transition-all duration-700 group-hover:grayscale-0" />
         <div class="absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent pointer-events-none"></div>
      </div>
    </div>
  </div>
  <!-- ═══════════════════════════════════════════════════════════════
       ULTRA-PREMIUM PARALLAX CTA — Layered Depth with Floating Text
       ═══════════════════════════════════════════════════════════════ -->
  <section id="parallax-cta" class="relative w-full" style="height: 200vh;">

    <!-- LAYER 1: Sticky Background (stays fixed in viewport while you scroll through 200vh) -->
    <div class="sticky top-0 w-full h-screen overflow-hidden">

      <!-- Background Image — will have its own slow parallax via GSAP -->
      <div id="parallax-bg" class="absolute inset-0 w-full h-full will-change-transform" style="transform: scale(1.15);">
        <img 
          src="https://images.squarespace-cdn.com/content/v1/67053ead069230112a5e9280/4300286e-4fbb-4695-89d1-84b69c504fdd/IMG_0754.png?format=2500w" 
          alt="Premium Auto Styling Studio" 
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Dark Cinematic Overlays -->
      <div class="absolute inset-0 bg-black/55 pointer-events-none"></div>
      <div class="absolute inset-0 bg-gradient-to-b from-[#08070b] via-transparent to-[#08070b] pointer-events-none"></div>
      <div class="absolute inset-0 bg-gradient-to-r from-black/30 via-transparent to-black/30 pointer-events-none"></div>

      <!-- Subtle purple atmospheric glow -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-purple-600/10 blur-[200px] rounded-full pointer-events-none"></div>

    </div>

    <!-- LAYER 2: Floating Content (scrolls naturally over the sticky background) -->
    <div class="relative z-10" style="margin-top: -100vh;">
      
      <!-- First viewport: clean open — just the image breathing -->
      <div class="h-[40vh]"></div>

      <!-- Floating Text Block -->
      <div class="min-h-[120vh] flex flex-col items-center justify-center px-6">
        <div class="max-w-5xl mx-auto text-center space-y-10">

          <!-- Eyebrow -->
          <div class="parallax-float overflow-hidden" data-speed="1.2">
            <span class="inline-block text-purple-400 text-[10px] md:text-xs uppercase tracking-[0.6em] md:tracking-[0.8em] font-black opacity-0 translate-y-8" id="cta-eyebrow">
              San Antonio's Premier Auto Styling Studio
            </span>
          </div>

          <!-- Main Headline — staggered reveal -->
          <div class="parallax-float space-y-2" data-speed="0.8">
            <h2 class="porsche-font text-[clamp(2.2rem,8vw,7rem)] leading-[0.85] text-white tracking-tighter opacity-0 translate-y-12" id="cta-headline-1">
              WE FOCUS ON
            </h2>
            <h2 class="porsche-font text-[clamp(2.2rem,8vw,7rem)] leading-[0.85] text-purple-500 tracking-tighter opacity-0 translate-y-12" id="cta-headline-2">
              HIGH-QUALITY
            </h2>
            <h2 class="porsche-font text-[clamp(2.2rem,8vw,7rem)] leading-[0.85] text-white/50 tracking-tighter opacity-0 translate-y-12" id="cta-headline-3">
              RESULTS.
            </h2>
          </div>

          <!-- Thin Divider -->
          <div class="parallax-float flex justify-center" data-speed="1.0">
            <div class="w-16 h-[1px] bg-purple-500/60 opacity-0 scale-x-0" id="cta-divider"></div>
          </div>

          <!-- Supporting Copy -->
          <div class="parallax-float" data-speed="0.6">
            <p class="text-zinc-300 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed font-light italic opacity-0 translate-y-8" id="cta-body">
              Woman owned and operated. Discover the difference at our studio — where automotive passion meets precision craftsmanship.
            </p>
          </div>

          <!-- CTA Button -->
          <div class="parallax-float pt-4" data-speed="0.4">
            <a href="quote.html" class="btn-solid inline-block py-5 md:py-6 px-14 md:px-20 text-[10px] md:text-xs rounded-full uppercase tracking-[0.5em] font-black transition-all duration-500 opacity-0 translate-y-8" id="cta-button" data-discover="true">
              Schedule Your Consult
            </a>
          </div>

        </div>
      </div>

      <!-- Bottom spacing — lets user scroll past cleanly -->
      <div class="h-[40vh]"></div>

    </div>
  </section>

  <!-- Footer -->
  <div id="footer-container" class="reveal-on-scroll"></div>
  <script>
    fetch('footer.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
        if (window.UnicornStudio) {
          window.UnicornStudio.init();
        }
      });
  </script>
  <script>
    // UnicornStudio initialization
    (function(){
      var u = window.UnicornStudio;
      if(u && u.init){
        if(document.readyState === "loading"){
          document.addEventListener("DOMContentLoaded", function(){u.init()});
        }else{
          u.init();
        }
      }else{
        window.UnicornStudio = {isInitialized:!1};
        var i = document.createElement("script");
        i.src = "https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v2.0.5/dist/unicornStudio.umd.js";
        i.onload = function(){
          if(document.readyState === "loading"){
            document.addEventListener("DOMContentLoaded", function(){UnicornStudio.init()});
          }else{
            UnicornStudio.init();
          }
        };
        (document.head||document.body).appendChild(i);
      }
    })();
  </script>
  <script>
    // Dynamically load the navbar from navbar.html
    fetch('navbar.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      });
  </script>
  <script>
    // Hero Image Sequence
    const heroCanvas = document.getElementById('hero-canvas');
    if (heroCanvas) {
      const ctx = heroCanvas.getContext('2d');
      const frameCount = 145;
      const images = [];
      let imagesLoaded = 0;
      const playhead = { frame: 0 };

      const currentFrame = index => `hero/${(index + 1).toString().padStart(5, '0')}.png`;

      const renderHero = () => {
        let frameToShow = Math.round(playhead.frame);
        const img = images[frameToShow];
        if (img) {
          // Fill canvas with dark background to match site bg on letterbox areas
          ctx.fillStyle = '#08070b';
          ctx.fillRect(0, 0, heroCanvas.width, heroCanvas.height);
          
          const canvasRatio = heroCanvas.width / heroCanvas.height;
          const imgRatio = img.width / img.height;
          
          let drawWidth, drawHeight, offsetX, offsetY;

          // On mobile (narrow/portrait screens), use "contain" so the full image is visible
          // On desktop (wide screens), use "cover" for immersive fullscreen feel
          const isMobile = heroCanvas.width < 768;

          if (isMobile) {
            // "Contain" — fit entire image within canvas, no cropping
            if (canvasRatio > imgRatio) {
              // Canvas is wider — fit to height, center horizontally
              drawHeight = heroCanvas.height;
              drawWidth = heroCanvas.height * imgRatio;
              offsetX = (heroCanvas.width - drawWidth) / 2;
              offsetY = 0;
            } else {
              // Canvas is taller — fit to width, position image toward top
              drawWidth = heroCanvas.width;
              drawHeight = heroCanvas.width / imgRatio;
              offsetX = 0;
              // Push image toward top third instead of dead center for better composition
              offsetY = (heroCanvas.height - drawHeight) * 0.3;
            }
          } else {
            // "Cover" — fill canvas completely, crop as needed (desktop)
            if (canvasRatio > imgRatio) {
              drawWidth = heroCanvas.width;
              drawHeight = heroCanvas.width / imgRatio;
              offsetX = 0;
              offsetY = (heroCanvas.height - drawHeight) / 2;
            } else {
              drawHeight = heroCanvas.height;
              drawWidth = heroCanvas.height * imgRatio;
              offsetX = (heroCanvas.width - drawWidth) / 2;
              offsetY = 0;
            }
          }

          ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);
        }
      };

      for (let i = 0; i < frameCount; i++) {
        const img = new Image();
        img.src = currentFrame(i);
        img.onload = () => {
          imagesLoaded++;
          if (imagesLoaded === frameCount) {
            renderHero();
          }
        };
        images.push(img);
      }

      heroCanvas.width = window.innerWidth;
      heroCanvas.height = window.innerHeight;

      window.addEventListener('resize', () => {
        heroCanvas.width = window.innerWidth;
        heroCanvas.height = window.innerHeight;
        renderHero();
      });

      const heroTl = gsap.timeline({
        scrollTrigger: {
          scrub: 1,
          trigger: '.hero',
          start: 'top top',
          end: '+=400%', 
          pin: true,
          anticipatePin: 1,
        }
      });

      heroTl.to(playhead, {
        frame: frameCount - 1,
        snap: 'frame',
        ease: 'none',
        duration: 3,
        onUpdate: renderHero
      });

      heroTl.to('.hero-content', {
        opacity: 1,
        duration: 1.5,
        ease: 'power2.out'
      });
    }
  </script>
  <script>
    // Parallax scroll effect for text and sections
    document.addEventListener('DOMContentLoaded', function() {
      const parallaxElements = document.querySelectorAll('.parallax-text, .parallax-section');
      parallaxElements.forEach(el => {
        const speed = parseFloat(el.getAttribute('data-speed')) || 1;
        gsap.to(el, {
          y: () => -(window.innerHeight * speed * 0.15),
          ease: 'power1.out',
          scrollTrigger: {
            trigger: el,
            start: 'top bottom',
            end: 'bottom top',
            scrub: true,
          }
        });
      });
      // Reveal-on-scroll animation for text and image after hero
      gsap.utils.toArray('.reveal-on-scroll').forEach((el, i) => {
        gsap.from(el, {
          opacity: 0,
          y: 40,
          duration: 0.8,
          delay: i * 0.2,
          ease: 'power2.out',
          scrollTrigger: {
            trigger: el,
            start: 'top 80%',
            toggleActions: 'play none none none',
          }
        });
      });
    });
  </script>
  
  <!-- Encrypted Text Animation -->
  <script>
    class EncryptedText {
      constructor(element, options = {}) {
        this.element = element;
        this.originalText = element.textContent;
        this.duration = options.duration || 2000;
        this.chars = options.chars || 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()';
        this.isAnimating = false;
        
        this.init();
      }
      
      init() {
        this.element.innerHTML = '';
        let currentWord = document.createElement('span');
        currentWord.style.display = 'inline-block';
        currentWord.style.whiteSpace = 'nowrap';
        
        this.originalText.split('').forEach(char => {
          if (char === ' ') {
            // Append current word if it has content
            if (currentWord.children.length > 0) {
              this.element.appendChild(currentWord);
            }
            
            // Append the space as a separate char
            const span = document.createElement('span');
            span.className = 'char';
            span.textContent = '\u00A0';
            this.element.appendChild(span);
            
            // Start a new word container
            currentWord = document.createElement('span');
            currentWord.style.display = 'inline-block';
            currentWord.style.whiteSpace = 'nowrap';
          } else {
            // Append character to current word
            const span = document.createElement('span');
            span.className = 'char';
            span.textContent = char;
            currentWord.appendChild(span);
          }
        });
        
        // Append any remaining word
        if (currentWord.children.length > 0) {
          this.element.appendChild(currentWord);
        }
      }
      
      animate() {
        if (this.isAnimating) return;
        this.isAnimating = true;
        this.element.classList.add('scrambling');
        
        const chars = this.element.querySelectorAll('.char');
        const charArray = this.chars.split('');
        
        chars.forEach((char, index) => {
          if (char.textContent === '\u00A0') return; // Skip spaces
          
          const originalChar = this.originalText[index];
          let scrambleCount = 0;
          const maxScrambles = Math.floor(this.duration / 100); // More scrambles for longer duration
          
          const scrambleInterval = setInterval(() => {
            if (scrambleCount < maxScrambles) {
              char.textContent = charArray[Math.floor(Math.random() * charArray.length)];
              scrambleCount++;
            } else {
              char.textContent = originalChar;
              clearInterval(scrambleInterval);
              
              // Check if all characters are done
              const allDone = Array.from(chars).every((c, i) => 
                c.textContent === '\u00A0' || c.textContent === this.originalText[i]
              );
              
              if (allDone) {
                setTimeout(() => {
                  this.element.classList.remove('scrambling');
                  this.isAnimating = false;
                }, 200);
              }
            }
          }, this.duration / (chars.length * maxScrambles));
        });
      }
    }
    
    // Initialize encrypted text elements
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing animations...');
      
      // Text Reveal Animation for paragraphs
      const textRevealElements = document.querySelectorAll('.text-reveal');
      console.log('Found text-reveal elements:', textRevealElements.length);
      
      textRevealElements.forEach((element, elementIndex) => {
        // Skip elements that are encrypted-inline (they have their own animation)
        if (element.classList.contains('encrypted-inline')) return;
        
        console.log('Processing text-reveal element:', element.id || elementIndex);
        
        // Split text into words and spaces
        const text = element.textContent;
        const parts = text.split(/(\s+)/); // Split on whitespace but keep the whitespace
        
        // Clear original text
        element.innerHTML = '';
        
        // Create spans for each word/space
        parts.forEach((part, partIndex) => {
          if (part.trim() === '') {
            // This is whitespace - create a non-animated space
            const spaceSpan = document.createElement('span');
            spaceSpan.textContent = part;
            spaceSpan.style.display = 'inline';
            element.appendChild(spaceSpan);
          } else {
            // This is a word - create animated span
            const wordSpan = document.createElement('span');
            wordSpan.textContent = part;
            wordSpan.classList.add('word');
            
            // Count only words for animation delay (not spaces)
            const wordCount = parts.filter(p => p.trim() !== '').indexOf(part);
            const delay = (wordCount * 0.08) + (elementIndex * 0.3); // Faster word stagger, element delay
            wordSpan.style.animationDelay = `${delay}s`;
            
            element.appendChild(wordSpan);
          }
        });
        
        // Trigger animation when element comes into view
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              console.log('Text-reveal element in view, animating:', element.id || elementIndex);
              // Add animation class to trigger CSS animations
              entry.target.classList.add('animate');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        
        observer.observe(element);
        
        // Also check if element is already in view on load
        const rect = element.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;
        if (isInView) {
          console.log('Text-reveal element already in view on load:', element.id || elementIndex);
          element.classList.add('animate');
        }
      });
      
      // Initialize encrypted subtitle
      const encryptedElement = document.getElementById('encrypted-subtitle');
      if (encryptedElement) {
        console.log('Initializing encrypted subtitle');
        const encrypted = new EncryptedText(encryptedElement, { 
          duration: 2500,
          chars: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?' 
        });
        
        // Trigger animation when element comes into view
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              console.log('Encrypted subtitle in view, animating');
              encrypted.animate();
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.5 });
        
        observer.observe(encryptedElement);
        
        // Check if already in view
        const rect = encryptedElement.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;
        if (isInView) {
          console.log('Encrypted subtitle already in view on load');
          encrypted.animate();
        }
      }
      
      // Initialize encrypted-text elements
      const encryptedTextElements = document.querySelectorAll('.encrypted-text');
      console.log('Found encrypted-text elements:', encryptedTextElements.length);
      
      encryptedTextElements.forEach((element, index) => {
        console.log('Initializing encrypted-text element:', index);
        const encrypted = new EncryptedText(element, { 
          duration: 5000,
          chars: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?' 
        });
        
        // Trigger animation when element comes into view
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              console.log('Encrypted-text element in view, animating:', index);
              setTimeout(() => encrypted.animate(), index * 500); // Stagger animations
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.3 });
        
        observer.observe(element);
        
        // Check if already in view
        const rect = element.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;
        if (isInView) {
          console.log('Encrypted-text element already in view on load:', index);
          setTimeout(() => encrypted.animate(), index * 500);
        }
      });
      
      // Initialize inline encrypted text portions
      const inlineEncryptedElements = document.querySelectorAll('.encrypted-inline');
      console.log('Found encrypted-inline elements:', inlineEncryptedElements.length);
      
      inlineEncryptedElements.forEach(element => {
        console.log('Initializing encrypted-inline element');
        const encrypted = new EncryptedText(element, { 
          duration: 3000,
          chars: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?' 
        });
        
        // Trigger animation when parent paragraph comes into view
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              console.log('Encrypted-inline parent in view, animating after delay');
              setTimeout(() => encrypted.animate(), 1000); // Delay for dramatic effect
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.3 });
        
        const parentElement = element.closest('p') || element;
        observer.observe(parentElement);
        
        // Check if already in view
        const rect = parentElement.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;
        if (isInView) {
          console.log('Encrypted-inline parent already in view on load');
          setTimeout(() => encrypted.animate(), 1000);
        }
      });
    });
  </script>
  
  <script src="navbar.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // ═══════════════════════════════════════════
      // LENIS SMOOTH SCROLL — Porsche-grade glide
      // ═══════════════════════════════════════════
      const lenis = new Lenis({
        lerp: 0.07,            // Lower = smoother glide-to-stop (luxury feel)
        duration: 1.4,         // Momentum carry duration
        smoothWheel: true,
        smoothTouch: false,    // Keep native scroll on mobile for best UX
        wheelMultiplier: 0.8,  // Slightly slower wheel = more premium
      });

      // Connect Lenis to GSAP ScrollTrigger so they stay in sync
      lenis.on('scroll', ScrollTrigger.update);
      gsap.ticker.add((time) => { lenis.raf(time * 1000); });
      gsap.ticker.lagSmoothing(0);

      // ═══════════════════════════════════════════
      // PARALLAX CTA — Background & Floating Text
      // ═══════════════════════════════════════════
      const ctaSection = document.getElementById('parallax-cta');
      const parallaxBg = document.getElementById('parallax-bg');

      if (ctaSection && parallaxBg) {
        // Background slow-motion parallax (moves ~30% of scroll speed)
        gsap.to(parallaxBg, {
          yPercent: -15,
          ease: 'none',
          scrollTrigger: {
            trigger: ctaSection,
            start: 'top bottom',
            end: 'bottom top',
            scrub: 0.6,
          }
        });

        // Floating text elements — each moves at a different rate for layered depth
        document.querySelectorAll('.parallax-float').forEach(el => {
          const speed = parseFloat(el.dataset.speed) || 1;
          gsap.to(el, {
            y: () => -80 * speed,
            ease: 'none',
            scrollTrigger: {
              trigger: ctaSection,
              start: 'top bottom',
              end: 'bottom top',
              scrub: 0.5,
            }
          });
        });

        // Staggered content reveal animations
        const ctaTl = gsap.timeline({
          scrollTrigger: {
            trigger: ctaSection,
            start: 'top 40%',
            toggleActions: 'play none none none',
          }
        });

        ctaTl
          .to('#cta-eyebrow', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' })
          .to('#cta-headline-1', { opacity: 1, y: 0, duration: 0.9, ease: 'power3.out' }, '-=0.5')
          .to('#cta-headline-2', { opacity: 1, y: 0, duration: 0.9, ease: 'power3.out' }, '-=0.6')
          .to('#cta-headline-3', { opacity: 1, y: 0, duration: 0.9, ease: 'power3.out' }, '-=0.6')
          .to('#cta-divider', { opacity: 1, scaleX: 1, duration: 0.6, ease: 'power2.inOut' }, '-=0.4')
          .to('#cta-body', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' }, '-=0.3')
          .to('#cta-button', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' }, '-=0.4');
      }

      // Register ScrollTrigger
      gsap.registerPlugin(ScrollTrigger);

      // Section Scroll Animation (Aceternity UI Container Scroll effect)
      const card = document.querySelector('.scroll-animation-card');
      const container = document.querySelector('.perspective-scroll-container');
      
      if(card && container) {
        // Set initial perspective on container
        gsap.set(container, { perspective: 1000 });
        
        // Animate the card
        gsap.fromTo(card, 
          { 
            rotateX: 20, 
            scale: 0.9, 
            y: 50,
            transformOrigin: "center center",
            boxShadow: '0 20px 50px -10px rgba(0,0,0,0.5)'
          },
          {
            rotateX: 0, 
            scale: 1, 
            y: 0,
            // opacity: 1, // Keep opacity handled by CSS or start at 1
            boxShadow: '0 0 0 0 rgba(0,0,0,0)',
            ease: "none",
            scrollTrigger: {
              trigger: container,
              start: "top bottom", // when top of container hits bottom of viewport
              end: "center center", // when center of container hits center of viewport
              scrub: 1 // smooth scrubbing
            }
          }
        );
      }
      
      // Auto-wrap text in buttons for the border gradient effect
      document.querySelectorAll('.btn-solid').forEach(btn => {
         if(!btn.querySelector('span')) {
             const text = btn.innerText;
             btn.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2">${text}</span>`;
         }
      });
    });
  </script>
</body>
</html>
